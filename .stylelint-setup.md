# Stylelint Setup Summary

## What Was Added

### 1. Dependencies
- `stylelint` - Core linter
- `stylelint-config-standard-scss` - Standard SCSS configuration
- `stylelint-scss` - SCSS-specific rules plugin
- `postcss` - Required peer dependency

### 2. Configuration Files
- `.stylelintrc.json` - Main configuration with rules to enforce variable usage
- `.stylelintignore` - Files/directories to ignore during linting

### 3. NPM Scripts
- `lint:css` - Lint all CSS/SCSS files
- `lint:css:fix` - Lint and auto-fix CSS/SCSS files
- `lint` - Updated to include stylelint (runs TypeScript, ESLint, and Stylelint)

### 4. CI Integration
- Updated `.github/workflows/lint.yml` to run stylelint as part of CI

## Key Rules Enforced

### Variable Enforcement (Primary Goal)
- `color-no-hex`: Prevents direct use of hex colors, enforces SCSS variables
- `color-named`: Prevents use of named colors (e.g., "red", "blue")

### SCSS Best Practices
- `scss/dollar-variable-pattern`: Enforces kebab-case for variable names
- `function-no-unknown`: Catches typos in function names (allows legacy functions like `darken()`, `lighten()`)
- `scss/no-global-function-names`: Disabled (project uses legacy SCSS functions)

## Current State

Total violations: **~900**
- Hex color violations (actual hardcoded colors): **25** in 4 files:
  - `scss/buttons.scss` (8 violations)
  - `src/LoadingSkeleton/LoadingSkeleton.scss` (15 violations)
  - `src/ToggleInput/ToggleInput.scss` (1 violation)
  - `stories/Typography/Typography.scss` (1 violation)
  - Note: Color definition files (`scss/css_properties.scss`, `scss/colors/**/*.scss`) are excluded from this rule
- Other violations include:
  - Empty line formatting
  - Color function notation issues (rgba vs rgb)
  - Selector pattern issues
  - Alpha value notation

## Usage

### Lint all stylesheets
```bash
yarn lint:css
```

### Auto-fix issues (where possible)
```bash
yarn lint:css:fix
```

### Run all linting (JS + CSS)
```bash
yarn lint
```

## Examples

### Using Color Variables

❌ **Bad** - Hardcoded hex colors:
```scss
.my-component {
  color: #3F6DCA;
  background-color: #FFFFFF;
  border-color: #E03131;
}
```

✅ **Good** - Using CSS custom properties:
```scss
.my-component {
  color: var(--ux-blue);
  background-color: var(--ux-white);
  border-color: var(--ux-red);
}
```

✅ **Also Good** - Using SCSS variables (from `scss/colors/palette.scss`):
```scss
.my-component {
  color: $ux-blue;
  background-color: $ux-white;
  border-color: $ux-red;
}
```

### Available Colors

See `scss/css_properties.scss` for the complete list of available color variables, including:
- Base colors: `--ux-blue`, `--ux-red`, `--ux-emerald`, `--ux-gray`, etc.
- Color scales: `--ux-blue-100` through `--ux-blue-900`
- Brand colors: `--brand-color-facebook`, `--brand-color-google`, etc.
- Synthesis palette: `--synth-*` variables

## Next Steps

1. **Fix hex color violations**: Only 25 violations in 4 files - these should be fixed by replacing hex values with appropriate color variables
2. **Optional - Fix formatting violations**: The ~875 other violations are mostly formatting/style issues that can be auto-fixed with `yarn lint:css:fix` or addressed incrementally
3. **Team alignment**: Review rules with team and adjust as needed
4. **CI enforcement**: Currently runs in CI - decide if violations should block merges or just warn

